 TestGetActiveSpan;tracer;noopSpan;span_main;ctxMain;ctxSub;activeSpan;tracer;notela;subSpan;subSpan1;cfg;trace
 ##.Reset
 cfg←⎕NEW ##.Notela.Configuration(,⊂'TestTraces')
 cfg.WithExporter'##.TokenExporter'
 cfg.BatchSize←3
 ##.Notela.Start cfg

 tracer←##.Notela.GetTracer'TestTraces'
 span_main←tracer.StartActiveSpan'MainInTestGetActiveSpan'
 ctxMain←span_main.Context

 subSpan←tracer.StartSpan'SubSpan'
 subSpan1←tracer.StartSpan'SubSpan1'
 ctxSub←subSpan.Context

 activeSpan←tracer.GetActiveSpan

 Assert ctxMain≡activeSpan.Context
 Assert ctxSub≢activeSpan.Context
 ⎕DL?0
 subSpan.End
 subSpan1.End
 span_main.End
 trace←##.GetTrace 0.1
 ⍝
